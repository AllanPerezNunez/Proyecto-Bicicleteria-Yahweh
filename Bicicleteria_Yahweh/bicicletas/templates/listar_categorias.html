<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista Categorias</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="icon" href="/media/imagenes_bd/yahweh.png" type="image/x-icon">
  <script>
      const botonEliminar = (id) => {
          if (window.confirm("¿Está seguro de querer eliminar el registro?")) {
            const motivo = prompt("Por favor, ingrese el motivo de la eliminación:");
            if (motivo && motivo.trim() !== "") {
              const motivoCodificado = encodeURIComponent(motivo.trim());
              window.location.href = `/eliminarcategoria/${id}?motivo=${motivoCodificado}`;
            } else {
              alert("Debes ingresar un motivo para continuar con la eliminación.");
            }
          }
        };

      const botonModificar = (id) => {
          if(window.confirm("¿Está seguro de querer modificar el registro?")){
              window.location.href = "/modificarcategoria/"+id;
          }
      }
  </script>

  </head>
<body>

  {% csrf_token %}

<!--=========================================NAVBAR==================================================-->
  <nav class="navbar" aria-label="Light offcanvas navbar" style="background-color: #1ddf1b;position:fixed;top:0;width:100%;z-index:100;">
            <div class="container-fluid">
              <button class="navbar-toggler" style="background-color: #e50c57; color: white;" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span><label  style="margin-left: 10px;">Acciones</label>
              </button>
              <div class="offcanvas offcanvas-start" data-bs-scroll="true" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasWithBothOptionsLabel">
                <div class="offcanvas-header">
                  <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel">Acciones</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                  <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                    <li class="nav-item">
                      <a class="nav-link active" aria-current="page" href="/dashboard">Inicio</a>
                      <a class="nav-link active" aria-current="page" href="/registrarproducto">Agregar Productos</a>
                      <a class="nav-link active" aria-current="page" href="/agregarhoras">Agregar Horas de Agendamiento</a>
                      <a class="nav-link active" aria-current="page" href="/agregarcategorias">Agregar Categorias</a>
                      <a class="nav-link active" aria-current="page" href="/listarproductos">Listar Productos</a>
                      <a class="nav-link active" aria-current="page" href="/listarusuarios">Listar Usuarios</a>
                      <a class="nav-link active" aria-current="page" href="/listarcategorias">Listar Categorias</a>
                      <a class="nav-link active" aria-current="page" href="/lista_agendas">Agendamientos</a>
                      <a class="nav-link active" aria-current="page" href="/seguimiento_admin">Seguimiento Compras online</a>
                      <a class="nav-link active" aria-current="page" href="/presencial_admin">Despacho Presencial</a> 
                      <a class="nav-link active" aria-current="page" href="/listar_historial">Historial de Acciones</a> 
                      <a class="nav-link active" aria-current="page" href="/cerrar Sesion">Cerrar Sesion</a> 
                    </li>
                  </ul>
                  
                </div>
              </div>
              <a class="navbar-brand" href="/dashboard" style="display: flex; align-items: center; text-decoration: none;position:relative;left:-70%;"><!--HREF DEBE LLEVAR AL DASHBOARD-->
                <img src="/media/imagenes_bd/yahweh.png" style="width:40px; height:40px;">
                <h3 style="font-size:20px; color: black;">Bicicletería Yahweh</h3>
              </a>
            </div>
  </nav>
<!--=================================FIN NAVBAR===========================================================-->


  <br/>

  
    <div class="container" style="margin-top:5%;margin-bottom:5%;">
      <h1 class="text-center" style="margin-bottom:3%;">Listado de Categorias</h1>
      {% if r%}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
          <strong>¡Felicidades!</strong> {{r}}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endif %}

      {% if r2%}
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
          <strong>¡Caspita!</strong> {{r2}}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endif %}

      <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab" tabindex="0" style="border:2px solid #e50c57;">
        <table border="1" class="table text-center">
          <tr style="background-color:#e50c57;width:100%;color:white;">
              <th>Id</th>
              <th>Categoria</th>
              <th></th>
              <th></th>
          </tr>

          {% for x in cat %}

          <tr>
              <td>{{x.id}}</td>
              <td>{{x.descripcion}}</td>
              <td> <button type="button" class="btn" style="background-color:#1ddf1b;border:none;font-weight:bold;" onclick="botonModificar({{x.id}})">Modificar</button> </td>
              <td> <button type="button" class="btn btn-danger" style="background-color:#e50c57;border:none;font-weight:bold;" onclick="botonEliminar({{x.id}})">Eliminar</button> </td>
          </tr>


          {% endfor %}

        </table>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
  </body>
</html>


